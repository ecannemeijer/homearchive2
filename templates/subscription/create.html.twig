{% extends 'base.html.twig' %}

{% block title %}Nieuw Abonnement - HomeArchive{% endblock %}

{% block body %}
<div class="container mx-auto px-4 py-8 max-w-3xl">
    <div class="mb-6">
        <a href="{{ path('subscription_index') }}" class="text-blue-600 hover:text-blue-700">
            <i class="fas fa-arrow-left"></i> Terug naar overzicht
        </a>
    </div>

    <div class="bg-white rounded-lg shadow-md p-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-6">
            <i class="fas fa-plus-circle text-blue-600"></i> Nieuw Abonnement
        </h1>

        <form method="post" action="{{ path('subscription_create') }}">
            <input type="hidden" name="_csrf_token" value="{{ csrf_token('subscription') }}">

            <!-- Basic Info -->
            <div class="mb-6">
                <label class="block text-gray-700 font-semibold mb-2">Naam *</label>
                <input type="text" name="name" required 
                       class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                       placeholder="Bijv. Netflix, Zorgverzekering">
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Type *</label>
                    <select name="type" required class="w-full border border-gray-300 rounded px-3 py-2">
                        <option value="subscription">Abonnement</option>
                        <option value="insurance">Verzekering</option>
                    </select>
                </div>

                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Categorie</label>
                    <select name="category" class="w-full border border-gray-300 rounded px-3 py-2">
                        <option value="">Selecteer een categorie</option>
                        {% for cat in categories %}
                            <option value="{{ cat.name }}">{{ cat.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Kosten (â‚¬) *</label>
                    <input type="number" name="cost" step="0.01" required 
                           class="w-full border border-gray-300 rounded px-3 py-2"
                           placeholder="0.00">
                </div>

                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Frequentie *</label>
                    <select name="frequency" class="w-full border border-gray-300 rounded px-3 py-2">
                        <option value="monthly">Maandelijks</option>
                        <option value="yearly">Jaarlijks</option>
                    </select>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Startdatum</label>
                    <input type="date" name="start_date" 
                           class="w-full border border-gray-300 rounded px-3 py-2">
                </div>

                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Einddatum</label>
                    <input type="date" name="end_date" 
                           class="w-full border border-gray-300 rounded px-3 py-2">
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 font-semibold mb-2">Factuurdatum (dag van de maand)</label>
                <input type="number" name="billing_date" min="1" max="31" 
                       class="w-full border border-gray-300 rounded px-3 py-2"
                       placeholder="Bijv. 15 voor de 15e van de maand">
            </div>

            <div class="mb-6">
                <label class="flex items-center">
                    <input type="checkbox" name="is_monthly_cancelable" value="1" class="mr-2">
                    <span class="text-gray-700">Maandelijks opzegbaar</span>
                </label>
            </div>

            <!-- Login Info (Optional) -->
            <div class="border-t pt-6 mb-6">
                <h3 class="text-xl font-semibold text-gray-900 mb-4">Login Gegevens (optioneel)</h3>
                
                <div class="mb-4">
                    <label class="block text-gray-700 font-semibold mb-2">Website URL</label>
                    <input type="url" name="website_url" 
                           class="w-full border border-gray-300 rounded px-3 py-2"
                           placeholder="https://...">
                </div>

                <div class="mb-4">
                    <label class="block text-gray-700 font-semibold mb-2">Gebruikersnaam</label>
                    <input type="text" name="username" value="" autocomplete="off"
                           class="w-full border border-gray-300 rounded px-3 py-2"
                           placeholder="Optioneel">
                </div>

                <div class="mb-4">
                    <label class="block text-gray-700 font-semibold mb-2">Wachtwoord</label>
                    <input type="password" name="password" value="" autocomplete="new-password"
                           class="w-full border border-gray-300 rounded px-3 py-2"
                           placeholder="Optioneel">
                    <p class="text-sm text-gray-500 mt-1">Wordt versleuteld opgeslagen</p>
                </div>
            </div>

            <!-- Notes -->
            <div class="mb-6">
                <label class="block text-gray-700 font-semibold mb-2">Notities</label>
                <textarea name="notes" rows="4" 
                          class="w-full border border-gray-300 rounded px-3 py-2"
                          placeholder="Extra informatie..."></textarea>
            </div>

            <div class="mb-6">
                <label class="block text-gray-700 font-semibold mb-2">Herinnering voor verlenging (dagen)</label>
                <input type="number" name="renewal_reminder" value="7" min="1" 
                       class="w-full border border-gray-300 rounded px-3 py-2">
            </div>

            <div class="flex gap-4">
                <button type="submit" 
                        class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold">
                    <i class="fas fa-save"></i> Opslaan
                </button>
                <a href="{{ path('subscription_index') }}" 
                   class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 px-6 py-3 rounded-lg font-semibold text-center">
                    Annuleren
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
