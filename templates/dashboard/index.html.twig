{% extends 'base.html.twig' %}

{% block title %}Dashboard - HomeArchive{% endblock %}

{% block body %}
{# Dashboard Container - Mobile-First Layout #}
<div class="px-4 sm:px-0">
    {# Page Header - Improved Typography and Spacing #}
    <div class="mb-6 sm:mb-8">
        <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-2">Dashboard</h1>
        <p class="text-base sm:text-lg text-gray-600">Welkom terug, {{ app.user.name }}</p>
    </div>

    {# Statistics Cards - Enhanced Mobile Responsiveness - Clickable #}
    <div class="grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5 mb-6 sm:mb-8">
        {# Total Subscriptions Card - Clickable #}
        <a href="{{ path('subscription_index') }}" class="card bg-white overflow-hidden shadow rounded-lg hover:shadow-lg transition-all cursor-pointer group">
            <div class="p-4 sm:p-5">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <i class="fas fa-file-invoice-dollar text-2xl sm:text-3xl text-blue-600 group-hover:scale-110 transition-transform" aria-hidden="true"></i>
                    </div>
                    <div class="ml-4 sm:ml-5 w-0 flex-1">
                        <dl>
                            <dt class="text-xs sm:text-sm font-medium text-gray-500 truncate">Abonnementen</dt>
                            <dd class="text-xl sm:text-2xl font-semibold text-gray-900 group-hover:text-blue-600 transition-colors">{{ subscription_count }}</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </a>

        {# Total Insurance Card - Clickable #}
        <a href="{{ path('subscription_index', {type: 'insurance'}) }}" class="card bg-white overflow-hidden shadow rounded-lg hover:shadow-lg transition-all cursor-pointer group">
            <div class="p-4 sm:p-5">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <i class="fas fa-shield-alt text-2xl sm:text-3xl text-green-600 group-hover:scale-110 transition-transform" aria-hidden="true"></i>
                    </div>
                    <div class="ml-4 sm:ml-5 w-0 flex-1">
                        <dl>
                            <dt class="text-xs sm:text-sm font-medium text-gray-500 truncate">Verzekeringen</dt>
                            <dd class="text-xl sm:text-2xl font-semibold text-gray-900 group-hover:text-green-600 transition-colors">{{ insurance_count }}</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </a>

        {# Total Passwords Card - Clickable #}
        <a href="{{ path('password_vault_index') }}" class="card bg-white overflow-hidden shadow rounded-lg hover:shadow-lg transition-all cursor-pointer group">
            <div class="p-4 sm:p-5">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <i class="fas fa-lock text-2xl sm:text-3xl text-purple-600 group-hover:scale-110 transition-transform" aria-hidden="true"></i>
                    </div>
                    <div class="ml-4 sm:ml-5 w-0 flex-1">
                        <dl>
                            <dt class="text-xs sm:text-sm font-medium text-gray-500 truncate">Wachtwoorden</dt>
                            <dd class="text-xl sm:text-2xl font-semibold text-gray-900 group-hover:text-purple-600 transition-colors">{{ total_passwords }}</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </a>

        {# Monthly Cost Card #}
        <div class="card bg-white overflow-hidden shadow rounded-lg hover:shadow-lg transition-all">
            <div class="p-4 sm:p-5">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <i class="fas fa-euro-sign text-2xl sm:text-3xl text-yellow-600" aria-hidden="true"></i>
                    </div>
                    <div class="ml-4 sm:ml-5 w-0 flex-1">
                        <dl>
                            <dt class="text-xs sm:text-sm font-medium text-gray-500 truncate">Per maand</dt>
                            <dd class="text-xl sm:text-2xl font-semibold text-gray-900">€ {{ monthly_cost|number_format(2, ',', '.') }}</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# Widget Section - Improved Mobile Layout #}
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
        {# Expiring Soon Widget #}
        {% if expiring_subscriptions|length > 0 %}
        <div class="card bg-white shadow rounded-lg p-4 sm:p-6">
            <h2 class="text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center gap-2">
                <i class="fas fa-exclamation-triangle text-orange-500" aria-hidden="true"></i> 
                <span>Verlopen binnenkort</span>
            </h2>
            <div class="space-y-2 sm:space-y-3">
                {% for sub in expiring_subscriptions %}
                <div class="flex items-center justify-between p-3 bg-orange-50 rounded-md hover:bg-orange-100 transition-colors">
                    <div class="flex-1 min-w-0">
                        <p class="font-medium text-gray-900 truncate">{{ sub.name }}</p>
                        <p class="text-sm text-gray-600">
                            <i class="fas fa-calendar text-orange-500 mr-1" aria-hidden="true"></i>
                            Verloopt: {{ sub.endDate|date('d-m-Y') }}
                        </p>
                    </div>
                    <a href="{{ path('subscription_show', {id: sub.id}) }}" 
                       class="ml-3 text-blue-600 hover:text-blue-800 flex-shrink-0 p-2 hover:bg-white rounded transition-all"
                       aria-label="Bekijk {{ sub.name }}">
                        <i class="fas fa-arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        {# Recent Subscriptions Widget #}
        <div class="card bg-white shadow rounded-lg p-4 sm:p-6">
            <h2 class="text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center gap-2">
                <i class="fas fa-clock text-blue-500" aria-hidden="true"></i> 
                <span>Recent toegevoegd</span>
            </h2>
            {% if recent_subscriptions|length > 0 %}
            <div class="space-y-2 sm:space-y-3">
                {% for sub in recent_subscriptions %}
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors">
                    <div class="flex-1 min-w-0">
                        <p class="font-medium text-gray-900 truncate">{{ sub.name }}</p>
                        <p class="text-sm text-gray-600">
                            <i class="fas fa-euro-sign text-green-500 mr-1" aria-hidden="true"></i>
                            € {{ sub.cost }} / {{ sub.frequency == 'monthly' ? 'maand' : 'jaar' }}
                        </p>
                    </div>
                    <a href="{{ path('subscription_show', {id: sub.id}) }}" 
                       class="ml-3 text-blue-600 hover:text-blue-800 flex-shrink-0 p-2 hover:bg-white rounded transition-all"
                       aria-label="Bekijk {{ sub.name }}">
                        <i class="fas fa-arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-6 sm:py-8">
                <i class="fas fa-inbox text-gray-300 text-4xl mb-3" aria-hidden="true"></i>
                <p class="text-gray-500 text-sm">Nog geen abonnementen</p>
            </div>
            {% endif %}
        </div>
    </div>

    {# Quick Actions - Improved Button Hierarchy and Mobile Layout #}
    <div class="mt-6 sm:mt-8 card bg-white shadow rounded-lg p-4 sm:p-6">
        <h2 class="text-base sm:text-lg font-semibold text-gray-900 mb-4 sm:mb-5 flex items-center gap-2">
            <i class="fas fa-bolt text-yellow-500" aria-hidden="true"></i>
            <span>Snelle acties</span>
        </h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4">
            {# Primary Action - Add Subscription #}
            <a href="{{ path('subscription_create') }}" 
               class="group flex items-center justify-center px-4 sm:px-5 py-3 sm:py-4 border-2 border-transparent text-sm sm:text-base font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all shadow-sm hover:shadow-md">
                <i class="fas fa-plus mr-2 group-hover:scale-110 transition-transform" aria-hidden="true"></i> 
                <span>Nieuw abonnement</span>
            </a>
            
            {# Secondary Action - Add Password #}
            <a href="{{ path('password_vault_create') }}" 
               class="group flex items-center justify-center px-4 sm:px-5 py-3 sm:py-4 border-2 border-transparent text-sm sm:text-base font-medium rounded-lg text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-all shadow-sm hover:shadow-md">
                <i class="fas fa-key mr-2 group-hover:scale-110 transition-transform" aria-hidden="true"></i> 
                <span>Nieuw wachtwoord</span>
            </a>
            
            {# Tertiary Action - View All #}
            <a href="{{ path('subscription_index') }}" 
               class="group flex items-center justify-center px-4 sm:px-5 py-3 sm:py-4 border-2 border-gray-300 text-sm sm:text-base font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all shadow-sm hover:shadow-md">
                <i class="fas fa-list mr-2 group-hover:translate-x-1 transition-transform" aria-hidden="true"></i> 
                <span>Alles bekijken</span>
            </a>
        </div>
    </div>
</div>
{% endblock %}
